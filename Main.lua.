--// =========================
--// SERVICES
--// =========================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

local lplayer = Players.LocalPlayer

--// =========================
--// CONFIG
--// =========================
local KEY = "kiki123"
local FILE = "WhiteCatKey.txt"

local CAT_PINK = Color3.fromRGB(255,182,193)
local SOFT_WHITE = Color3.fromRGB(250,250,250)
local LIGHT_GRAY = Color3.fromRGB(235,235,235)

--// =========================
--// CLEANUP
--// =========================
if CoreGui:FindFirstChild("WhiteCatHub") then
    CoreGui.WhiteCatHub:Destroy()
end

--// =========================
--// GUI + SOUND
--// =========================
local sg = Instance.new("ScreenGui", CoreGui)
sg.Name = "WhiteCatHub"

local meow = Instance.new("Sound", sg)
meow.SoundId = "rbxassetid://5104257032"
meow.Volume = 1

--// =========================
--// ANIMATION
--// =========================
local function bounce(obj)
    local old = obj.Size
    obj:TweenSize(old * 0.92, "Out", "Quad", 0.08, true)
    task.wait(0.08)
    obj:TweenSize(old, "Out", "Back", 0.08, true)
end

--// =========================
--// MAIN FRAME (COMPACT)
--// =========================
local main = Instance.new("Frame", sg)
main.Size = UDim2.new(0,300,0,360)
main.Position = UDim2.new(0.5,-150,0.32,0)
main.BackgroundColor3 = SOFT_WHITE
main.Visible = false
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,16)

--// BACKGROUND IMAGE
local bg = Instance.new("ImageLabel", main)
bg.Size = UDim2.new(1,-10,1,-10)
bg.Position = UDim2.new(0,5,0,5)
bg.Image = BG_IMAGE
bg.ImageTransparency = 0.88
bg.BackgroundTransparency = 1
bg.ScaleType = Enum.ScaleType.Fit
bg.ZIndex = 0
Instance.new("UICorner", bg).CornerRadius = UDim.new(0,14)

--// TITLE
local title = Instance.new("TextLabel", main)
title.Size = UDim2.new(1,-20,0,28)
title.Position = UDim2.new(0,10,0,6)
title.Text = "üê± White Cat Hub"
title.Font = Enum.Font.GothamBold
title.TextSize = 14
title.TextColor3 = CAT_PINK
title.BackgroundTransparency = 1
title.ZIndex = 2

--// TOGGLE BUTTON
local toggleBtn = Instance.new("TextButton", sg)
toggleBtn.Size = UDim2.new(0,50,0,50)
toggleBtn.Position = UDim2.new(0,20,0.5,0)
toggleBtn.Text = "CAT"
toggleBtn.Visible = false
toggleBtn.BackgroundColor3 = SOFT_WHITE
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(1,0)

toggleBtn.MouseButton1Click:Connect(function()
    meow:Play()
    bounce(toggleBtn)
    main.Visible = not main.Visible
end)

--// =========================
--// TABS
--// =========================
local tabBar = Instance.new("Frame", main)
tabBar.Size = UDim2.new(1,-20,0,26)
tabBar.Position = UDim2.new(0,10,0,42)
tabBar.BackgroundTransparency = 1
tabBar.ZIndex = 2

local tabLayout = Instance.new("UIListLayout", tabBar)
tabLayout.FillDirection = Enum.FillDirection.Horizontal
tabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
tabLayout.Padding = UDim.new(0,4)

local pages = {}

local function CreateTab(name, active)
    local btn = Instance.new("TextButton", tabBar)
    btn.Size = UDim2.new(0,60,0,22)
    btn.Text = name
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 9
    btn.BackgroundColor3 = active and CAT_PINK or LIGHT_GRAY
    btn.TextColor3 = Color3.fromRGB(60,60,60)
    Instance.new("UICorner", btn)

    local page = Instance.new("ScrollingFrame", main)
    page.Size = UDim2.new(1,-20,1,-120)
    page.Position = UDim2.new(0,10,0,76)
    page.ScrollBarThickness = 0
    page.AutomaticCanvasSize = Enum.AutomaticSize.Y
    page.Visible = active
    page.BackgroundTransparency = 1
    page.ZIndex = 2
    Instance.new("UIListLayout", page).Padding = UDim.new(0,6)

    pages[name] = {btn = btn, page = page}

    btn.MouseButton1Click:Connect(function()
        for _,v in pairs(pages) do
            v.page.Visible = false
            v.btn.BackgroundColor3 = LIGHT_GRAY
        end
        page.Visible = true
        btn.BackgroundColor3 = CAT_PINK
        bounce(btn)
    end)

    return page
end

local function AddBtn(pg, text, cb)
    local b = Instance.new("TextButton", pg)
    b.Size = UDim2.new(1,0,0,28)
    b.Text = text
    b.Font = Enum.Font.Gotham
    b.TextSize = 11
    b.TextColor3 = Color3.fromRGB(70,70,70)
    b.BackgroundColor3 = Color3.fromRGB(245,245,245)
    Instance.new("UICorner", b).CornerRadius = UDim.new(0,10)

    b.MouseButton1Click:Connect(function()
        meow:Play()
        bounce(b)
        cb()
    end)
end

--// =========================
--// TABS SETUP
--// =========================
local mainPg = CreateTab("Main", true)
local espPg  = CreateTab("ESP")
local movePg = CreateTab("Move")
local miscPg = CreateTab("Misc")

--// =========================
--// FEATURES
--// =========================

-- AUTO EAT / HEAL
local autoEat = false
AddBtn(mainPg,"Auto Eat / Heal",function()
    autoEat = not autoEat
end)

RunService.Heartbeat:Connect(function()
    if autoEat and lplayer.Character then
        local hum = lplayer.Character:FindFirstChild("Humanoid")
        if hum and hum.Health < hum.MaxHealth * 0.6 then
            for _,f in pairs(lplayer.Backpack:GetChildren()) do
                if f.Name:lower():find("meat") or f.Name:lower():find("berry") then
                    f.Parent = lplayer.Character
                    f:Activate()
                end
            end
        end
    end
end)

-- AUTO CHOP
local autoChop = false
AddBtn(mainPg,"Auto Chop Trees",function()
    autoChop = not autoChop
    task.spawn(function()
        while autoChop do
            local axe = lplayer.Backpack:FindFirstChild("Axe") or lplayer.Character:FindFirstChild("Axe")
            if axe then
                axe.Parent = lplayer.Character
                for _,v in pairs(workspace:GetDescendants()) do
                    if v:IsA("Model") and v.Name:lower():find("tree") then
                        local p = v:FindFirstChildWhichIsA("BasePart")
                        if p then
                            lplayer.Character.HumanoidRootPart.CFrame = p.CFrame * CFrame.new(0,0,2)
                            axe:Activate()
                            task.wait(0.25)
                        end
                    end
                end
            end
            task.wait(1)
        end
    end)
end)

-- ANIMAL ESP
AddBtn(espPg,"Animal ESP",function()
    for _,v in pairs(workspace:GetDescendants()) do
        if v:IsA("Model") and v.Name:lower():find("animal") then
            if not v:FindFirstChild("CatESP") then
                local h = Instance.new("Highlight",v)
                h.Name="CatESP"
                h.FillColor=Color3.fromRGB(0,255,0)
            else
                v.CatESP:Destroy()
            end
        end
    end
end)

-- CHEST ESP
AddBtn(espPg,"Chest ESP",function()
    for _,v in pairs(workspace:GetDescendants()) do
        if v:IsA("Model") and v.Name:lower():find("chest") then
            if not v:FindFirstChild("CatESP") then
                local h = Instance.new("Highlight",v)
                h.Name="CatESP"
                h.FillColor=Color3.fromRGB(255,215,0)
            else
                v.CatESP:Destroy()
            end
        end
    end
end)

-- FLY
local flying = false
AddBtn(movePg,"Fly",function()
    flying = not flying
    local hrp = lplayer.Character.HumanoidRootPart
    if flying then
        local bv = Instance.new("BodyVelocity",hrp)
        local bg = Instance.new("BodyGyro",hrp)
        bv.MaxForce = Vector3.new(9e9,9e9,9e9)
        bg.MaxTorque = Vector3.new(9e9,9e9,9e9)
        bg.P = 9e4
        task.spawn(function()
            while flying do
                bv.Velocity = workspace.CurrentCamera.CFrame.LookVector * 60
                bg.CFrame = workspace.CurrentCamera.CFrame
                task.wait()
            end
            bv:Destroy()
            bg:Destroy()
        end)
    end
end)

-- SPEED + STAMINA
AddBtn(movePg,"Speed + Infinite Stamina",function()
    local hum = lplayer.Character:FindFirstChild("Humanoid")
    if hum then hum.WalkSpeed = 32 end
    task.spawn(function()
        while task.wait(0.5) do
            local s = lplayer.Character:FindFirstChild("Stamina",true)
            if s then s.Value = 100 end
        end
    end)
end)

-- NIGHT ALERT
AddBtn(miscPg,"Night Alerts",function()
    task.spawn(function()
        while task.wait(5) do
            local n = workspace:GetAttribute("Night")
            if n and n >= 90 then
                game.StarterGui:SetCore("SendNotification",{
                    Title="‚ö†Ô∏è DANGER NIGHT",
                    Text="HIDE NOW",
                    Duration=5
                })
            end
        end
    end)
end)

-- PERFORMANCE MODE
AddBtn(miscPg,"Performance Mode",function()
    for _,v in pairs(workspace:GetDescendants()) do
        if v:IsA("ParticleEmitter") or v:IsA("Trail") then
            v.Enabled = false
        end
    end
end)

--// =========================
--// KEY SYSTEM
--// =========================
local function Unlock()
    toggleBtn.Visible = true
    main.Visible = true
    if writefile then writefile(FILE, KEY) end
    if sg:FindFirstChild("KeyFrame") then sg.KeyFrame:Destroy() end
end

if not (isfile and isfile(FILE) and readfile(FILE)==KEY) then
    local kf = Instance.new("Frame",sg)
    kf.Size=UDim2.new(0,250,0,150)
    kf.Position=UDim2.new(0.5,-125,0.4,0)
    kf.BackgroundColor3=SOFT_WHITE
    kf.Active=true
    kf.Draggable=true
    Instance.new("UICorner",kf)

    local box = Instance.new("TextBox",kf)
    box.Size=UDim2.new(0.8,0,0,34)
    box.Position=UDim2.new(0.1,0,0.35,0)
    box.PlaceholderText="Key..."
    Instance.new("UICorner",box)

    local btn = Instance.new("TextButton",kf)
    btn.Size=UDim2.new(0.8,0,0,34)
    btn.Position=UDim2.new(0.1,0,0.65,0)
    btn.Text="Unlock"
    btn.BackgroundColor3=CAT_PINK
    Instance.new("UICorner",btn)

    btn.MouseButton1Click:Connect(function()
        if box.Text == KEY then Unlock() end
    end)
else
    Unlock()
end

--// =========================
--// CREDITS
--// =========================
local credits = Instance.new("TextLabel", main)
credits.Size = UDim2.new(1,0,0,18)
credits.Position = UDim2.new(0,0,1,-18)
credits.Text = "White Cat Hub ‚Ä¢ by kiki"
credits.TextSize = 9
credits.TextTransparency = 0.4
credits.BackgroundTransparency = 1
credits.TextColor3 = CAT_PINK
