-- White Cat Hub Ultimate Final
local CoreGui, Players, RunService, UserInputService, TweenService = game:GetService("CoreGui"), game:GetService("Players"), game:GetService("RunService"), game:GetService("UserInputService"), game:GetService("TweenService")
local lplayer = Players.LocalPlayer
local correctKey = "Kikicatwalk"
local fileName = "WhiteCatKey.txt"

-- Auto-Save & Cleanup
local function saveKey() if writefile then writefile(fileName, correctKey) end end
local function hasSavedKey() if isfile and isfile(fileName) then return readfile(fileName) == correctKey end return false end
if CoreGui:FindFirstChild("WhiteCatHub") then CoreGui.WhiteCatHub:Destroy() end

local sg = Instance.new("ScreenGui", CoreGui); sg.Name = "WhiteCatHub"
local meow = Instance.new("Sound", sg); meow.SoundId = "rbxassetid://5104257032"; meow.Volume = 1

local function bounce(obj)
    local oldSize = obj.Size
    obj:TweenSize(UDim2.new(oldSize.X.Scale * 0.8, oldSize.X.Offset, oldSize.Y.Scale * 0.8, oldSize.Y.Offset), "Out", "Quad", 0.1, true)
    task.wait(0.1)
    obj:TweenSize(oldSize, "Out", "Back", 0.1, true)
end

-- --- MAIN HUB UI ---
local main = Instance.new("Frame", sg)
main.Size = UDim2.new(0, 320, 0, 420); main.Position = UDim2.new(0.5, -160, 0.3, 0)
main.BackgroundColor3 = Color3.new(1, 1, 1); main.Visible = false; main.Active = true; main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 15)

local toggleBtn = Instance.new("TextButton", sg)
toggleBtn.Size = UDim2.new(0, 50, 0, 50); toggleBtn.Position = UDim2.new(0, 20, 0.5, 0)
toggleBtn.Text = "CAT"; toggleBtn.BackgroundColor3 = Color3.new(1, 1, 1); toggleBtn.Visible = false
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(1, 0)
toggleBtn.MouseButton1Click:Connect(function() meow:Play(); bounce(toggleBtn); main.Visible = not main.Visible end)

-- Tab Setup
local tabContainer = Instance.new("Frame", main)
tabContainer.Size = UDim2.new(1, 0, 0, 40); tabContainer.Position = UDim2.new(0, 0, 0, 45); tabContainer.BackgroundTransparency = 1
local tabLayout = Instance.new("UIListLayout", tabContainer); tabLayout.FillDirection = "Horizontal"; tabLayout.HorizontalAlignment = "Center"; tabLayout.Padding = UDim.new(0, 3)

local pages = {}
local function CreateTab(name, active)
    local btn = Instance.new("TextButton", tabContainer); btn.Size = UDim2.new(0, 55, 0, 25); btn.Text = name
    btn.BackgroundColor3 = active and Color3.fromRGB(255, 182, 193) or Color3.fromRGB(240, 240, 240)
    btn.TextColor3 = active and Color3.new(1,1,1) or Color3.new(0.3,0.3,0.3); btn.Font = "GothamBold"; btn.TextSize = 10; Instance.new("UICorner", btn)
    local pg = Instance.new("ScrollingFrame", main); pg.Size = UDim2.new(1, -20, 1, -120); pg.Position = UDim2.new(0, 10, 0, 95); pg.Visible = active or false; pg.BackgroundTransparency = 1; pg.ScrollBarThickness = 0
    Instance.new("UIListLayout", pg).Padding = UDim.new(0, 5)
    pages[name] = {page = pg, button = btn}
    btn.MouseButton1Click:Connect(function()
        for _, p in pairs(pages) do p.page.Visible = false; p.button.BackgroundColor3 = Color3.fromRGB(240, 240, 240) end
        pg.Visible = true; btn.BackgroundColor3 = Color3.fromRGB(255, 182, 193); bounce(btn)
    end)
    return pg
end

local function AddBtn(pg, txt, cb)
    local b = Instance.new("TextButton", pg); b.Size = UDim2.new(1, 0, 0, 30); b.Text = txt; b.BackgroundColor3 = Color3.fromRGB(245, 245, 245); b.Font = "Gotham"; b.TextSize = 11; Instance.new("UICorner", b)
    b.MouseButton1Click:Connect(function() meow:Play(); bounce(b); cb() end)
end

local mainPg = CreateTab("Main", true); local espPg = CreateTab("ESP"); local tpPg = CreateTab("Teleport"); local miscPg = CreateTab("Misc")

-- --- FEATURES ---
AddBtn(mainPg, "Auto Rescue All Kids", function()
    local kids = {"Dino Kid", "Kraken Kid", "Squid Kid", "Koala Kid"}
    for _, k in pairs(kids) do
        local kid = workspace:FindFirstChild(k, true)
        if kid and lplayer.Character then
            lplayer.Character.HumanoidRootPart.CFrame = kid:GetModelCFrame() or kid.CFrame
            task.wait(0.5)
            local r = kid:FindFirstChild("HumanoidRootPart") or kid:FindFirstChildWhichIsA("BasePart")
            if r then r.CFrame = lplayer.Character.HumanoidRootPart.CFrame end
        end
    end
end)

AddBtn(mainPg, "Auto Sapling Wall", function()
    local campfire = workspace:FindFirstChild("Campfire", true)
    if not campfire then return end
    local pos = campfire:GetModelCFrame().Position
    local saps = {}
    for _, v in pairs(workspace:GetDescendants()) do if v.Name:lower():find("sapling") then table.insert(saps, v) end end
    for i = 1, math.min(#saps, 10) do
        local angle = (i / 10) * math.pi * 2
        local target = pos + Vector3.new(math.cos(angle) * 12, 0, math.sin(angle) * 12)
        local p = saps[i]:IsA("Model") and (saps[i].PrimaryPart or saps[i]:FindFirstChildWhichIsA("BasePart")) or saps[i]
        if p then p.CFrame = CFrame.new(target) end
    end
end)

AddBtn(miscPg, "2x Speed", function() lplayer.Character.Humanoid.WalkSpeed = 32 end)
AddBtn(miscPg, "Infinite Stamina", function() 
    _G.infStam = true 
    task.spawn(function() while _G.infStam do local s = lplayer.Character:FindFirstChild("Stamina", true) if s then s.Value = 100 end task.wait(0.1) end end)
end)
AddBtn(miscPg, "Godmode (Invincible)", function()
    _G.god = true
    task.spawn(function() while _G.god do lplayer.Character.Humanoid.Health = 100 task.wait(0.1) end end)
end)

-- --- KEY SYSTEM ---
local function Unlock() meow:Play(); if sg:FindFirstChild("KeyFrame") then sg.KeyFrame:Destroy() end; toggleBtn.Visible = true; main.Visible = true; saveKey() end
if not hasSavedKey() then
    local kf = Instance.new("Frame", sg); kf.Name = "KeyFrame"; kf.Size = UDim2.new(0, 250, 0, 160); kf.Position = UDim2.new(0.5, -125, 0.4, 0); kf.BackgroundColor3 = Color3.fromRGB(255, 240, 245); kf.Active = true; kf.Draggable = true; Instance.new("UICorner", kf)
    local ki = Instance.new("TextBox", kf); ki.Size = UDim2.new(0.8, 0, 0, 35); ki.Position = UDim2.new(0.1, 0, 0.3, 0); ki.PlaceholderText = "Key..."; Instance.new("UICorner", ki)
    local kb = Instance.new("TextButton", kf); kb.Size = UDim2.new(0.8, 0, 0, 35); kb.Position = UDim2.new(0.1, 0, 0.65, 0); kb.Text = "Unlock"; kb.BackgroundColor3 = Color3.fromRGB(255, 182, 193); Instance.new("UICorner", kb)
    kb.MouseButton1Click:Connect(function() if ki.Text == correctKey then Unlock() end end)
else Unlock() end

local credits = Instance.new("TextLabel", main); credits.Size = UDim2.new(1, 0, 0, 20); credits.Position = UDim2.new(0, 0, 1, -20); credits.Text = "maded by : kiki"; credits.TextColor3 = Color3.fromRGB(255, 182, 193); credits.BackgroundTransparency = 1
